!function(window,$){window.ITROrderBonus&&window.ITRElementBonus||(window.ITROrderBonus=function(arParams){this.Update={path:"/bitrix/components/vbcherepanov/vbcherepanov.bonusfororder/ajax.php",params:{AJAX:"Y",SITE_ID:arParams.siteid,TYPE:arParams.TYPE}}},window.ITROrderBonus.prototype.UpdateBonus=function(counts){this.Update.params.COUNTS=counts,BX.ajax({url:this.Update.path,data:this.Update.params,method:"POST",dataType:"html",timeout:30,async:!0,processData:!0,scriptsRunFirst:!0,emulateOnload:!0,start:!0,cache:!1,onsuccess:function(data){var obSelect;BX.findChild(BX("bns"),{class:"value"},!0).innerHTML=data},onfailure:function(){}})},window.ITRElementBonus=function(arParams){this.Update={path:"/bitrix/components/vbcherepanov/vbcherepanov.bonuselement/ajax.php",params:{AJAX:"Y",SITE_ID:arParams.siteid,PRODUCT_ID:arParams.productID,IBLOCK_ID:arParams.IBLOCKID,MIN_PRICE:arParams.MIN_PRICE,TYPE:arParams.TYPE,COUNTS:0}}},window.ITRElementBonus.prototype.UpdateBonus=function(counts){var $bnsEl=$("#bnsEl");void 0===this.spinner?(this.spinner=RZB2.ajax.spinner($bnsEl.closest(".bonus")),this.spinner.Start({color:RZB2.themeColor}),this.spinnerCount=1):this.spinnerCount++,this.Update.params.COUNTS=counts;var _=this,$value=$bnsEl.find(".value");$value.css("color","#ccc"),BX.ajax({url:this.Update.path,data:this.Update.params,method:"POST",dataType:"html",timeout:30,async:!0,processData:!0,scriptsRunFirst:!0,emulateOnload:!0,start:!0,cache:!1,onsuccess:function(data){$value.html(data).removeAttr("style"),_.spinnerCount--,_.spinnerCount<1&&(_.spinner.Stop(),delete _.spinner);var bHide=data.length<1||"INF"==data||"0"==data;$bnsEl.closest(".element_bonus").toggleClass("hide",bHide)},onfailure:function(){}})})}(window,jQuery);