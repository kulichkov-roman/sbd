RZB2.ajax.quickView={URL:void 0,HTML:void 0,jqXHR:void 0,iblockID:void 0,contentClass:".modal_quick-view_content",catalogParamsRequested:!1,$content:void 0,load:function(callback){var data={},qv=RZB2.ajax.quickView;for(var key in RZB2.ajax.params)data[key]=RZB2.ajax.params[key];return data.rz_ajax="y",data.rz_quick_view="y",data.REQUEST_URI=this.URL,void 0!==this.iblockID&&(data.IBLOCK_ID=this.iblockID),void 0===qv.spinner&&(qv.spinner=RZB2.ajax.spinner(qv.$content),qv.spinner.Start({color:RZB2.themeColor})),$.ajax({url:SITE_DIR+"ajax/sib/catalog.php",type:"POST",data:data,dataType:"html",success:function(data){"function"==typeof callback&&callback(data)},error:function(jqXHR,textStatus,errorThrown){RZB2.ajax.showMessage("AJAX error: "+textStatus,"error")}})},onModalShown:function(e){var qv=RZB2.ajax.quickView;void 0===qv.$content&&(qv.$content=$(this).find(qv.contentClass));var $target=$(e.relatedTarget);if(qv.URL=$target.closest(".catalog-item").find("a.link").attr("href"),$target.closest(".special-blocks").length>0){var obId=$target.closest(".catalog-item-wrap").attr("id");obId=obId.replace("-","x"),qv.iblockID=window["ob"+obId].product.IBLOCK_ID}qv.jqXHR=qv.load(qv.onLoadModalCallback)},onLoadModalCallback:function(data){var qv=RZB2.ajax.quickView;if("object"==typeof qv.spinner&&(qv.spinner.Stop(),qv.spinner=void 0),data){if("[ajax died] loading params"==data&&!qv.catalogParamsRequested)return qv.catalogParamsRequested=!0,void(qv.jqXHR=RZB2.ajax.updateCatalogParametersCache(function(){qv.jqXHR=qv.load(qv.onLoadModalCallback)}));qv.HTML=qv.$content.html(),qv.$content.html(data),RZB2.ajax.BasketSmall.RefreshButtons(),RZB2.ajax.Compare.RefreshButtons(),RZB2.ajax.Favorite.RefreshButtons(),initThumbs(qv.$content[0]),initTooltips(qv.$content[0]),initSelects(qv.$content[0]),initRatingStars(qv.$content[0]),"Y"==serverSettings.quickViewChars&&(initGenInfoToggle(),initToggles(qv.$content[0]))}},onModalHidden:function(e){var qv=RZB2.ajax.quickView;qv.URL=void 0,qv.iblockID=void 0,qv.jqXHR&&4!=qv.jqXHR.readyState?qv.jqXHR.abort():void 0!==qv.HTML&&$(this).find(qv.contentClass).html(qv.HTML)}};