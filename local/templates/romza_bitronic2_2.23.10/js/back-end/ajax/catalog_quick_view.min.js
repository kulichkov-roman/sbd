RZB2.ajax.quickView={URL:void 0,HTML:void 0,jqXHR:void 0,iblockID:void 0,contentClass:".modal_quick-view_content",catalogParamsRequested:!1,$content:void 0,load:function(callback){var data={},qv=RZB2.ajax.quickView;for(var key in RZB2.ajax.params)data[key]=RZB2.ajax.params[key];return data.rz_ajax="y",data.rz_quick_view="y",data.REQUEST_URI=this.URL,void 0!==this.iblockID&&(data.IBLOCK_ID=this.iblockID),void 0===qv.spinner&&(qv.spinner=RZB2.ajax.spinner(qv.$content),qv.spinner.Start({color:RZB2.themeColor})),$.ajax({url:SITE_DIR+"ajax/sib/catalog.php",type:"POST",data:data,dataType:"html",success:function(data){"function"==typeof callback&&callback(data)},error:function(jqXHR,textStatus,errorThrown){RZB2.ajax.showMessage("AJAX error: "+textStatus,"error")}})},onModalShown:function(e){var qv=RZB2.ajax.quickView;void 0===qv.$content&&(qv.$content=$(this).find(qv.contentClass));var $target=$(e.relatedTarget);if(qv.URL=$target.closest(".catalog-item").find("a.link").attr("href"),$target.closest(".special-blocks").length>0){var obId=$target.closest(".catalog-item-wrap").attr("id");obId=obId.replace("-","x"),qv.iblockID=window["ob"+obId].product.IBLOCK_ID}void 0===qv.jqXHR&&(qv.jqXHR=qv.load(qv.onLoadModalCallback))},onLoadModalCallback:function(data){var qv=RZB2.ajax.quickView;if("object"==typeof qv.spinner&&(qv.spinner.Stop(),qv.spinner=void 0),data){if("[ajax died] loading params"==data&&!qv.catalogParamsRequested)return qv.catalogParamsRequested=!0,void(qv.jqXHR=RZB2.ajax.updateCatalogParametersCache(function(){qv.jqXHR=qv.load(qv.onLoadModalCallback)}));"object"==typeof qv.jqXHR&&delete qv.jqXHR,void 0===qv.HTML&&(qv.HTML=qv.$content.html()),qv.$content.html(data),RZB2.ajax.BasketSmall.RefreshButtons(),RZB2.ajax.Compare.RefreshButtons(),RZB2.ajax.Favorite.RefreshButtons(),RZB2.utils.initLazy($(qv.$content)),initProductCarousel(qv.$content[0]),initTimers(qv.$content[0]),b2.init.tooltips(qv.$content[0]),b2.init.selects(qv.$content[0]),b2.init.ratingStars(qv.$content[0]),"function"==typeof b2.init.scrollbarsTargeted&&b2.init.scrollbarsTargeted(qv.$content[0]),"Y"==serverSettings.quickViewChars&&(b2.quickViewGenInfoInited=!0,initGenInfoToggle(qv.$content[0]),initToggles(qv.$content[0])),b2.init.inputs(qv.$content)}},onModalHidden:function(e){var qv=RZB2.ajax.quickView;if(qv.URL=void 0,qv.iblockID=void 0,"object"==typeof qv.jqXHR)return 4!=qv.jqXHR.readyState&&qv.jqXHR.abort(),void delete qv.jqXHR;$(this).find(".timer").each(function(){$(this).off().countdown("pause")}),void 0!==qv.HTML&&$(this).find(qv.contentClass).html(qv.HTML)}};