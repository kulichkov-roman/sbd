function initSettings(){$(b2.s).on("set",function(e,name,value,byInput){var nameCC=$.camelCase(name),prevValue=b2.s[nameCC];b2.s[nameCC]=value,b2.s.isFrontend&&localStorage.setItem("b2.s."+nameCC,b2.s[nameCC]),value===b2.initialS[nameCC]?delete b2.changedS[name]:void 0!==b2.initialS[nameCC]&&(b2.changedS[name]=value);var $elDOM=$("[data-"+name+"]");if($elDOM.length>0&&$elDOM.attr("data-"+name,value),!byInput){var $input=$("[name="+name+"], [data-name="+name+"]"),inputType=$input.is("select")?"select":$input.attr("type");switch(inputType){case"select":$input.val(value).change();break;case"text":$input.val(value);break;case"radio":$input.filter("[value="+value+"]").prop("checked",!0);break;case"checkbox":$input.prop("checked",value);break;default:console.log("unknown input type in settings set: ",inputType)}}b2.rel[nameCC]&&b2.rel[nameCC].forEach(function(element){setRelated(value,element)}),"function"==typeof b2.set[nameCC]&&b2.set[nameCC](value,{prevValue:prevValue,$elDOM:$elDOM})}),b2.el.$settingsForm=$("#settings-panel-cblocks").on("change",function(e){var $t=$(e.target),name=$t.data("name")||$t.attr("name"),value=$t.val();void 0!==value&&void 0!==name&&("v-limits"!==name&&"h-limits"!==name||(value=$t.get(0).noUiSlider.get()),"false"===value?value=!1:"true"===value&&(value=!0),$t.is("input:checkbox")&&(value=$t.is(":checked")),$(b2.s).trigger("set",[name,value,!0]))});var submit=!0;if(b2.el.$settingsModal.on("show.bs.modal",function(){Object.keys(b2.initialS).length<1&&(b2.initialS=$.extend({},b2.s)),b2.el.$settingsForm.data("reset",!0)}).on("hide.bs.modal",function(){if(b2.el.$settingsForm.data("reset")){for(var name in b2.changedS)$(b2.s).trigger("set",[name,b2.initialS[$.camelCase(name)]]);b2.changedS={}}}),b2.el.$settingsForm.on("submit",function(){return b2.el.$settingsForm.data("reset",!1),b2.el.$settingsModal.modal("hide"),submit}),$("#submit-settings").on("click",function(){submit=!1,b2.el.$settingsForm.submit()}),b2.s.isFrontend)for(var nameCC in b2.el.inputSliderWidth=$('input[name="big-slider-width"]'),b2.el.inputCatalogPlacement=$('input[name="catalog-placement"]'),bs.dummy.$el=$(".big-slider.dummy"),bs.dummy.$el.length>0&&(bs.dummy.media=bs.dummy.$el.find(".media"),bs.dummy.text=bs.dummy.$el.find(".text")),bs.curSettingsFor="all",bs.curSettingsForInput=$('[name="bs_cur-settings-for"]'),bs.curBlockInputs={},bs.curBlockInputs.text=$('[name="bs_cur-block"][value="text"]'),bs.curBlockInputs.media=$('[name="bs_cur-block"][value="media"]'),bs.hAlignInputs=$('[name="bs_h-align"]'),bs.vAlignInputs=$('[name="bs_v-align"]'),bs.textAlignInput=$('[name="bs_text-align"]'),bs.textAlignWrap=$("#bs_text-align-wrap"),bs.animInput=$('[name="bs_anim"]'),b2.s){var storedVal=localStorage.getItem("b2.s."+nameCC),curVal=b2.s[nameCC];if("true"===storedVal&&(storedVal=!0),"false"===storedVal&&(storedVal=!1),storedVal&&storedVal!==curVal){var dashedName=nameCC.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();$(b2.s).trigger("set",[dashedName,storedVal])}}}$("#settings_blocks .collapse").on("show.bs.collapse hide.bs.collapse",function(e){$(this).closest("fieldset").toggleClass("no-border")});