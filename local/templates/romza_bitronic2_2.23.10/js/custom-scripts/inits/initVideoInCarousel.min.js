function initVideos(target){$(target).find(".video").each(function(){var $t=$(this),$siblings=$t.siblings(),$carousel=$t.closest(".carousel"),$modal=$t.closest(".modal"),$video=$t.closest(".video-wrap-inner"),$item=$t.closest(".item"),data=$t.data();if(void 0!==$t.data("src")){var $iframe=$('<iframe src="https://www.youtube.com/embed/'+data.src+"?enablejsapi=1"+(void 0!==data.parameters&&0<data.parameters.length?"&"+data.parameters:"")+'"></iframe>').addClass("video").insertBefore($t);$t.remove();var autoplay=void 0!==data.autoplay?1:0,muted=void 0!==data.muted?1:0,settings={showinfo:void 0!==data.showinfo?data.showinfo:0,controls:void 0!==data.controls?data.controls:0};$carousel.length&&($siblings=$siblings.add($carousel.find(".thumbnails-wrap.active, .thumbnails-frame.active")));var player=new YT.Player($iframe.get(0),{playerVars:settings,events:{onReady:function(e){muted&&e.target.mute(),autoplay&&($item.hasClass("active")&&e.target.playVideo(),$carousel.on("slid.bs.carousel",function(){$item.hasClass("active")&&e.target.getPlayerState()!==YT.PlayerState.PLAYING?e.target.playVideo():$item.hasClass("active")||e.target.getPlayerState()!==YT.PlayerState.PLAYING||e.target.pauseVideo()})),$carousel.length&&$carousel.on("slid.bs.carousel",function(){$item.hasClass("active")||e.target.getPlayerState()!==YT.PlayerState.PLAYING||e.target.pauseVideo()}),$modal.length&&$modal.on("hide.bs.modal",function(){e.target.getPlayerState()===YT.PlayerState.PLAYING&&e.target.pauseVideo()})},onStateChange:function(e){e.data===YT.PlayerState.PAUSED||e.data===YT.PlayerState.ENDED?("hide"===$video.data("controls-on-play")&&$siblings.fadeIn("slow"),$item.length&&$item.removeClass("video-playing")):e.data===YT.PlayerState.PLAYING&&("hide"===$video.data("controls-on-play")&&$siblings.fadeOut(),$item.length&&$item.addClass("video-playing"))}}})}})}function onYouTubePlayerAPIReady(){void 0!==window.frameCacheVars?isFrameDataReceived?initVideos(document):BX.addCustomEvent("onFrameDataReceived",function(json){initVideos(document)}):domReady?initVideos(document):$(function(){initVideos(document)})}var tag=document.createElement("script");tag.src="//www.youtube.com/player_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);