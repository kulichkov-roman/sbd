function UmSlider(el,options){var that=this;if(this.inited=!1,this.content=el.find(".content:first"),!this.content||0===this.content.length)return!1;var width=this.content.outerWidth(),controls=el.find(".controls:first"),timer,resizeTimer;function afterResize(){that.groupBy!==that.getGroupBy()&&that.updatePages()}this.onChange=options.onChange||function(prev,next){prev.removeClass("active"),next.addClass("active")},this.infinite=options.infinite||!1,this.dotsWrap=options.dotsWrap||controls.children(".dots"),this.dots=this.dotsWrap.children(".dot"),this.prev=options.prev||controls.children(".prev"),this.next=options.next||controls.children(".next"),this.numeric=options.numeric||controls.children(".numeric"),this.centeringSingle=options.centeringSingle||!1,this.items=options.items||this.content.children(),this.count=this.items.length,this.groupBy=options.groupBy||1,this.responsive=options.responsive||[{bp:0,groupBy:this.groupBy}],this.getGroupBy=function(){if("auto"===that.responsive){var activeItems=that.items.filter(".active");if(activeItems.length||(activeItems=that.items.addClass("active")),!activeItems.eq(0).is(":visible"))return that.groupBy;var contentWidth=that.content.get(0).getBoundingClientRect().width,itemWidth,percent=100*activeItems.get(0).getBoundingClientRect().width/contentWidth;return res=Math.floor(100/Math.floor(percent)),res}for(var i=0;i<that.responsive.length;i++)if(Modernizr.mq("(max-width: "+that.responsive[i].bp+"px)"))return that.responsive[i].groupBy;return that.responsive[0].groupBy},this.changeNumeric=function(){var shown=that.groupBy;that.activePage===that.pageCount-1&&(shown=that.pages[that.activePage].length),shown>1?that.numeric.html(that.activePage+1+"-"+shown+" / "+that.count):that.numeric.html(that.activePage+1+" / "+that.count)},this.pages=[],this.pageCount,this.active,this.activePage,this.updatePages=function(){that.groupBy=that.getGroupBy(),that.pages=[];for(var i=0;i<that.items.length;i+=that.groupBy){if(i+that.groupBy>=that.items.length){that.pages.push(that.items.slice(i));break}that.pages.push(that.items.slice(i,i+that.groupBy))}that.pageCount=that.pages.length,1===that.pageCount&&that.centeringSingle?that.content.addClass("center"):that.content.removeClass("center"),that.active=that.items.filter(".active").eq(0).index(),-1===that.active&&(that.active=0),that.activePage=Math.floor(that.active/that.groupBy),that.items.removeClass("active"),that.pageCount>0&&that.pages[that.activePage].addClass("active"),that.updateDots(),that.updateBtns(),that.changeNumeric()},this.updateDots=function(){var dotsCount=that.dots.length;if(that.pageCount<=1)0!==dotsCount&&(that.dots.remove(),that.dots=$());else{if(that.pageCount>dotsCount){for(var newDots=[],i=0;i<that.pageCount-dotsCount;i++){var newDot=$('<i class="dot" />');newDots.push(newDot),that.dots=that.dots.add(newDot)}that.dotsWrap.append(newDots)}else if(that.pageCount<dotsCount){var removed=that.dots.slice(that.pageCount).remove();that.dots=that.dots.not(removed)}that.dots.eq(that.activePage).addClass("active").siblings(".active").removeClass("active")}},this.updateBtns=function(){if(that.pageCount<=1)return that.prev.css("display","none"),void that.next.css("display","none");that.prev.css("display",""),that.next.css("display",""),that.prev.removeClass("disabled"),that.next.removeClass("disabled"),0!==that.activePage||that.infinite||that.prev.addClass("disabled"),that.activePage!==that.pageCount-1||that.infinite||that.next.addClass("disabled")},this.updatePages(),this.animating=!1,this.changePage=function(targetPage){if(!that.animating){that.counter=0,that.videoPlaying=!1;var dir=">",prevPage=that.activePage;switch(targetPage){case"next":that.activePage++;break;case"prev":that.activePage--,dir="<";break;default:$.isNumeric(targetPage)?(targetPage<that.activePage&&(dir="<"),that.activePage=targetPage):that.activePage++}that.activePage>=that.pageCount&&(that.activePage=0),that.activePage<0&&(that.activePage=that.pageCount-1),that.updateBtns(),that.changeNumeric(),that.dots.eq(prevPage).removeClass("active"),that.dots.eq(that.activePage).addClass("active"),that.onChange(that.pages[prevPage],that.pages[that.activePage],dir,prevPage,that.activePage)}},this.dotsWrap.on("click",".dot",function(){var _;$(this).hasClass("active")||that.changePage($(this).index())}),this.prev.on("click",function(){$(this).hasClass("disabled")||that.changePage("prev")}),this.next.on("click",function(){$(this).hasClass("disabled")||that.changePage("next")}),this.content.on("swipeleft",function(){Modernizr.mq("(max-width: 767px)")&&that.changePage("next")}),this.content.on("swiperight",function(){Modernizr.mq("(max-width: 767px)")&&that.changePage("prev")}),this.cycle=options.cycle||!1,this.paused=!1,this.videoPlaying=!1,this.interval=options.interval||8,this.counter=0,this.cycle&&this.count>1&&(timer=setInterval(function(){that.paused||that.videoPlaying||that.counter++===that.interval&&that.changePage("next")},1e3),el.hover(function(){that.paused=!0},function(){that.paused=!1})),$(window).on("resize",function(){clearTimeout(resizeTimer),resizeTimer=setTimeout(afterResize,300)}),this.inited=!0,el.data("UmSlider",this)}