function FooterMenu(menu,visibleItemsNumber){var self=this,container=menu.children(".container-wrap"),main=container.children(".main"),mainItems=main.children(),btnShow=container.find(".catalog-show"),btnHide=container.find(".catalog-hide"),adds=$('<div class="catalog-menu-footer additional" />'),visible=$.isNumeric(visibleItemsNumber)?visibleItemsNumber:"all",addsItems,timeout,rebuildTimeout;this.resetFull=function(){container.removeClass("ready btn-shown"),main.css("display",""),adds&&adds.detach().css("display",""),addsItems&&addsItems.length>0&&(mainItems=mainItems.add(addsItems),main.append(addsItems))},this.makeSideFull=function(){"all"!==visible&&mainItems.length>visible?(addsItems=mainItems.slice(visible),mainItems=mainItems.slice(0,visible),adds.prepend(addsItems).appendTo(container),container.addClass("ready btn-shown")):container.addClass("ready")},this.updateState=function(){self.rebuild(visible)},this.updateVisible=function(number){visible!==number&&$.isNumeric(number)&&(visible=number,self.rebuild())},this.rebuild=function(){clearTimeout(rebuildTimeout),rebuildTimeout=setTimeout(function(){self.resetFull(),clearTimeout(timeout),timeout=setTimeout(function(){self.makeSideFull(),menu.on("click.mainMenu",".btn-catalog-footer-wrap .catalog-show",function(e){e.stopPropagation(),adds.velocity("slideDown",0,"linear"),menu.addClass("opened")}).on("click.mainMenu",".btn-catalog-footer-wrap .catalog-hide",function(e){e.stopPropagation(),adds.velocity("slideUp",0,"linear"),menu.removeClass("opened")})},10)},10)}}