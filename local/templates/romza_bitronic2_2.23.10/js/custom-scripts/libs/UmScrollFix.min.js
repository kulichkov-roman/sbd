function UmScrollFix(el,container,offsetTop,offsetBottom){var body=$("body"),bodyOffset="fixed-top"===b2.s.topLinePosition?body.find(".top-line").outerHeight():0,self=this,left,w,top,bottom;offsetTop=offsetTop?offsetTop+bodyOffset:bodyOffset,offsetBottom=offsetBottom||0,this.getDims=function(offTop,offBot){offsetTop=void 0!==offTop?offTop+bodyOffset:offsetTop,offsetBottom=void 0!==offBot?offBot:offsetBottom;var containerOffset=container.offset();left=containerOffset.left,w=container.outerWidth(),top=containerOffset.top-offsetTop,bottom=top+container.outerHeight()-el.outerHeight()-offsetBottom},self.getDims();var win=$(window),state,scrollPos;this.update=function(forceUpdate){scrollPos=win.scrollTop();var oldState=state;scrollPos<=top?("normal"!==state||forceUpdate)&&(el.css({position:"",left:"",width:"",top:"",bottom:"",zIndex:""}),state="normal"):scrollPos>=bottom?("bottom"!==state||forceUpdate)&&(el.css({position:"absolute",left:"0",top:"auto",bottom:offsetBottom,zIndex:"1"}),state="bottom"):("fixed"!==state||forceUpdate)&&(el.css({position:"fixed",left:left,width:w,top:offsetTop,bottom:"auto",zIndex:"1"}),state="fixed"),oldState!==state&&el.removeClass("state_normal state_fixed state_bottom").addClass("state_"+state)},self.update();var v=globalCounter++;win.on("scroll.umScrollFix"+v,function(e){self.update()}),body.on("offsetChange.umScrollfix"+v,function(){bodyOffset="fixed-top"===b2.s.topLinePosition?body.find(".top-line").outerHeight():0,self.getDims(0),self.update(!0)});var updating=setInterval(function(){self.getDims(),self.update(!0)},2e3),resizeTimer;function afterResize(){self.getDims(),self.update(!0)}win.on("resize.umScrollFix"+v,function(){clearTimeout(resizeTimer),resizeTimer=setTimeout(afterResize,200)}),this.destroy=function(){win.off("scroll.umScrollFix"+v),win.off("resize.umScrollFix"+v),body.off("offsetChange.umScrollFix"+v),clearInterval(updating),el.css({position:"",left:"",width:"",top:"",bottom:"",zIndex:""}).removeClass("state_normal state_fixed state_bottom")}}