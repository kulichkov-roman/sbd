function UmAccordeon(blocks,opt){var t=this;this.onChange=opt&&opt.onChange||function(){},this.active=opt&&opt.active||"all",$.isNumeric(this.active)||(this.active="all"),opt&&0===opt.active&&(this.active=0);var headers=$(),contents=$();blocks.each(function(){var children=$(this).children();headers=headers.add(children.eq(0)),contents=contents.add(children.eq(1))}),this.open=function(index,immediate){blocks.eq(index).hasClass("shown")||(immediate?(contents.eq(index).show(),blocks.eq(index).addClass("shown"),t.onChange(contents.eq(index))):contents.eq(index).velocity("slideDown","fast",function(){blocks.eq(index).addClass("shown"),t.onChange(contents.eq(index))}))},this.close=function(index,immediate){immediate?(blocks.eq(index).removeClass("shown"),contents.eq(index).hide()):(blocks.eq(index).removeClass("shown"),contents.eq(index).velocity("slideUp","fast",function(){t.onChange(contents.eq(index))}))},this.toggle=function(index,immediate){blocks.eq(index).hasClass("shown")?t.close(index):t.open(index)},this.updateContent=function(){blocks.filter(".shown").each(function(){var index=$(this).index();t.onChange(contents.eq(index))})},"all"===t.active?blocks.each(function(i){t.open(i,!0)}):(blocks.each(function(i){t.close(i,!0)}),t.open(t.active,!0)),headers.on("click.umAccordeon",function(){var index=headers.index($(this));t.toggle(index,!1)}),this.destroy=function(){blocks.removeClass("shown"),headers.off("click.umAccordeon"),contents.css({display:""})}}