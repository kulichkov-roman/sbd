$(document).ready(function(){var b2setStylingType=b2.set.stylingType;b2.set.stylingType=function(val){$(".theme-demos").each(function(){var _=$(this);_.hasClass(val)?_.show():_.hide()});var activeThemeName=$(".theme-demo.active").data("theme");activeThemeName=activeThemeName.replace(/-\w+/i,"-"+val),$("."+activeThemeName).length?$("."+activeThemeName).click():$(".theme-demos."+val).find("li.theme-demo:first").click(),activeThemeName.match(/\-flat$/)?$("body").removeClass("more_bold"):$("body").addClass("more_bold"),"function"==typeof b2setStylingType&&b2setStylingType(val)},b2.rel.stores.push({selector:"#settings_show-stock",states:{true:[{action:"prop",arguments:["disabled",!0]}],false:[{action:"prop",arguments:["disabled",!1]}]}}),b2.rel.stores_mobile=[{selector:"#settings_show-stock_MOBILE",states:{true:[{action:"prop",arguments:["disabled",!0]}],false:[{action:"prop",arguments:["disabled",!1]}]}}],b2.set.captchaRegistration=function(){$('input[name="SETTINGS[captcha-quick-buy]"]').prop("checked",!0)},b2.set.customTheme=function(value){var newTheme=$(".theme-demo.active").attr("data-theme");value?(RZB2.themeColor=$('[name="theme-main-color"]').val(),b2.el.$customTheme.appendTo("body")):(newTheme=(newTheme=newTheme.replace("-flat","")).replace("-skew",""),RZB2.themeColor=RZB2.arrDefColors[newTheme],b2.el.$customTheme.detach()),$body.toggleClass("custom-theme",value)},b2.set.themeButton=function(value){$("#settings_theme-button").val(value)},$(".theme-demo").on("click",function(){if(!$(this).hasClass("active")){$(".theme-demo.active").removeClass("active"),$(this).addClass("active");var newTheme=$(this).attr("data-theme");$("input#theme-demo").val(newTheme),newTheme.match(/\-flat$/)?$("body").removeClass("more_bold"):$("body").addClass("more_bold"),newTheme=(newTheme=newTheme.replace("-flat","")).replace("-skew",""),RZB2.themeColor=$('[data-name="custom-theme"]').prop("checked")?RZB2.themeColor:RZB2.arrDefColors[newTheme]}});var $setPanel=$("#settings-panel-cblocks"),$setPanelSubmit=$("#settings-panel-submit");$.fn.serializeAssoc=function(){for(var obj={result:{},add:function(name,value){var tmp=name.match(/^(.*)\[([^\]]*)\]$/);if(tmp){var v={};tmp[2]?v[tmp[2]]=value:v[$.count(v)]=value,this.add(tmp[1],v)}else"object"==typeof value?("object"!=typeof this.result[name]&&(this.result[name]={}),this.result[name]=$.extend(this.result[name],value)):this.result[name]=value}},ar=this.serializeArray(),i=0;i<ar.length;i++)obj.add(ar[i].name,ar[i].value);return obj.result};var setCookie=function(name,value,prefix){var date=new Date;date.setFullYear(date.getFullYear()+1),document.cookie=prefix+name+"="+value+";domain=."+window.location.hostname+"; path=/; expires="+date.toUTCString()},fillBSSettings=function(object,prefix){for(var key in object)switch(typeof object[key]){case"object":fillBSSettings(object[key],prefix+key+"_");break;case"function":break;default:$(prefix+key).val(object[key])}};$setPanelSubmit.on("click",function(e){if(fillBSSettings(bs.defaults,"#settings_bs_"),"DEMO"in RZB2&&RZB2.DEMO){var arSettings=$setPanel.serializeAssoc();$.ajax({type:"POST",url:SITE_DIR+"ajax/sib/composite.php",data:arSettings,dataType:"json",success:function(obj){$setPanel.submit()}})}else $setPanel.submit()}),$setPanel.on("click",".set-color li",function(e){var $this=$(this),$parent=$this.closest(".set-color"),$tar=$parent.data("target"),$body=$("body");$body.attr("data-site-background",""),$body.find('[name="SETTINGS[type_bg_ground]"]').val("pattern"),$tar||($tar=$("#settings_"+$parent.data("name")),$parent.data("target",$tar)),$tar.val($this.data("value")).trigger("change")}),$setPanel.on("click",".site-image li",function(e){var $this=$(this),val=$this.data("value"),$parent=$this.closest(".site-image"),$tar=$parent.data("target"),$img=$(".full-fixed-bg"),$body=$("body");$body.find('[name="SETTINGS[type_bg_ground]"]').val("image"),$body.attr("data-site-background","image"),$img.length?$img.attr("src",val):$("<img>").addClass("full-fixed-bg").attr("src",val).appendTo("body"),$tar||($tar=$("#settings_"+$parent.data("name")),$parent.data("target",$tar)),$tar.val($this.data("value")).trigger("change")}),$setPanel.on("change",".minicolors",function(e){var $this=$(this),$tar=$this.data("target"),$body=$("body");$body.find('[name="SETTINGS[type_bg_ground]"]').val("color"),$body.attr("data-site-background",""),$tar||($tar=$("#settings_"+$this.data("name")),$this.data("target",$tar)),$tar.val($this.val()).trigger("change")}),$setPanel.on("change",".color-setting",function(e){var $this=$(this),obj=$this.data("obj");obj||(obj=$($this.data("selector")),$this.data("obj",obj)),$this.data("selector")&&obj.css($this.data("property"),$this.val())}),$setPanel.on("change",".type-choose",function(e){var $this=$(this),$parent=$this.closest(".setting-content");$parent.find(".data-type").hide();var $curElem=$parent.find(".data-type.type-"+$this.val());$curElem.show(),$curElem.find(".set-color").trigger("change")}),$setPanel.on("show.bs.collapse hide.bs.collapse",".collapse",function(e){$(this).closest("fieldset").toggleClass("no-border")}),$("#cancel-settings").hover(function(){b2.el.$settingsForm.data("reset",!0)},function(){b2.el.$settingsForm.data("reset",!1)}),$("#settings_blocks label.checkbox-styled").on("click",function(){$('input.statebox[data-name="preset"]').prop("checked",!1)});var presets={"currency-switcher":{easy:!1,medium:!0,hard:!0},"block_main-menu-elem":{easy:!1,medium:!0,hard:!0},"menu-show-icons":{easy:!1,medium:!1,hard:!0},block_pricelist:{easy:!1,medium:!1,hard:!0},"quick-view":{easy:!1,medium:!0,hard:!0},"quick-view-chars":{easy:!1,medium:!0,hard:!0},backnav_enabled:{easy:!1,medium:!1,hard:!0},show_discount_percent:{easy:!1,medium:!0,hard:!0},stores:{easy:!1,medium:!1,hard:!0},"show-stock":{easy:!1,medium:!1,hard:!0},block_show_stars:{easy:!1,medium:!0,hard:!0},block_show_geoip:{easy:!1,medium:!0,hard:!0},block_show_compare:{easy:!0,medium:!0,hard:!0},block_show_favorite:{easy:!0,medium:!0,hard:!0},block_show_oneclick:{easy:!1,medium:!0,hard:!0},block_show_article:{easy:!1,medium:!0,hard:!0},block_show_sort_block:{easy:!0,medium:!0,hard:!0},block_show_gallery_thumb:{easy:!1,medium:!1,hard:!0},block_show_ad_banners:{easy:!1,medium:!0,hard:!0},block_worktime:{easy:!1,medium:!0,hard:!0},block_search_category:{easy:!1,medium:!0,hard:!0},block_search_category_MOBILE:{easy:!1,medium:!1,hard:!0},block_menu_count:{easy:!1,medium:!0,hard:!0},block_menu_count_MOBILE:{easy:!1,medium:!1,hard:!0},"block-buy_button_MOBILE":{easy:!1,medium:!1,hard:!0},"block_home-main-slider":{easy:!0,medium:!0,hard:!0},"block_home-rubric":{easy:!1,medium:!0,hard:!0},"block_home-cool-slider":{easy:!1,medium:!0,hard:!0},cool_slider_show_names:{easy:!1,medium:!0,hard:!0},coolslider_show_stickers:{easy:!1,medium:!1,hard:!0},"block_home-specials":{easy:!0,medium:!0,hard:!0},"block_home-specials_icons":{easy:!1,medium:!0,hard:!0},"block_home-specials_count":{easy:!1,medium:!1,hard:!0},"block_home-our-adv":{easy:!1,medium:!0,hard:!0},"block_home-feedback":{easy:!0,medium:!0,hard:!0},catchbuy_color_heading:{easy:!1,medium:!0,hard:!0},"block_home-catchbuy":{easy:!1,medium:!0,hard:!0},"block_home-news":{easy:!0,medium:!0,hard:!0},"block_home-voting":{easy:!1,medium:!0,hard:!0},"block_home-brands":{easy:!1,medium:!0,hard:!0},"block_home-vk":{easy:!1,medium:!1,hard:!0},"block_home-ok":{easy:!1,medium:!1,hard:!0},"block_home-fb":{easy:!1,medium:!1,hard:!0},"block_home-tw":{easy:!1,medium:!1,hard:!0},"block_home-flmp":{easy:!1,medium:!1,hard:!0},"block_detail-addtoorder":{easy:!1,medium:!0,hard:!0},"block_detail-similar":{easy:!1,medium:!1,hard:!0},"block_detail-similar-view":{easy:!1,medium:!1,hard:!0},"block_detail-similar-price":{easy:!1,medium:!0,hard:!0},"block_detail-recommended":{easy:!1,medium:!0,hard:!0},"block_detail-viewed":{easy:!1,medium:!0,hard:!0},"block_detail-delivery":{easy:!1,medium:!1,hard:!0},"block_detail-view3d":{easy:!1,medium:!0,hard:!0},"block_detail-gift-products":{easy:!1,medium:!0,hard:!0},"block_detail-gift-main-products":{easy:!1,medium:!0,hard:!0},detail_catchbuy_slider:{easy:!1,medium:!0,hard:!0},block_detail_print:{easy:!1,medium:!1,hard:!0},block_detail_price_updated:{easy:!1,medium:!0,hard:!0},block_detail_review:{easy:!1,medium:!0,hard:!0},block_detail_short_info_under_image:{easy:!1,medium:!0,hard:!0},block_detail_feedback:{easy:!1,medium:!1,hard:!0},block_detail_socials:{easy:!1,medium:!0,hard:!0},block_detail_gamification:{easy:!1,medium:!0,hard:!0},block_detail_gamification_MOBILE:{easy:!1,medium:!1,hard:!0},block_show_comment_count:{easy:!1,medium:!1,hard:!0},catalog_catchbuy_slider:{easy:!1,medium:!1,hard:!0},"block_list-view-block":{easy:!0,medium:!0,hard:!0},"block_list-view-list":{easy:!1,medium:!0,hard:!0},"block_list-view-table":{easy:!0,medium:!0,hard:!0},"block_list-sub-sections":{easy:!1,medium:!0,hard:!0},"block_list-section-desc":{easy:!1,medium:!0,hard:!0},"block_list-hits":{easy:!1,medium:!1,hard:!0},"table-units-col":{easy:!1,medium:!0,hard:!0},"table-units-col_MOBILE":{easy:!1,medium:!1,hard:!0},"block_basket-gift-products":{easy:!1,medium:!0,hard:!0},"block_search-viewed":{easy:!1,medium:!0,hard:!0},"block_search-bestseller":{easy:!1,medium:!1,hard:!0},"block_search-recommend":{easy:!1,medium:!0,hard:!0},"block_404-viewed":{easy:!1,medium:!0,hard:!0},"block_404-bestseller":{easy:!1,medium:!1,hard:!0},"block_404-recommend":{easy:!1,medium:!0,hard:!0}};for(var key in b2.rel.preset=[],presets){var relObj={selector:"#settings_"+key,states:{}};if(!$(relObj.selector).is(":disabled")){for(var stateKey in presets[key])relObj.states[stateKey]=[{action:"prop",arguments:["checked",presets[key][stateKey]]}];if(b2.rel.preset.push(relObj),void 0===presets[key+"_MOBILE"]){var relObjMobile={selector:relObj.selector+"_MOBILE",states:relObj.states},$relObjMobile=$(relObjMobile.selector);$relObjMobile.length<1||$relObjMobile.is(":disabled")||b2.rel.preset.push(relObjMobile)}}}}),$(window).on("modalSettingsInited",function(){b2.el.$settingsForm.data("reset",!1),b2.el.$settingsModal.on("shown.bs.modal",function(){b2.el.$settingsForm.data("reset",!1)}),b2.el.inputSliderWidth=$('input[data-name="big-slider-width"]'),$('input[data-name="catalog-placement"]:checked').change(),$('input[data-name="container-width"]:checked').change(),$("#settings_custom-theme").change(),$("#settings_stores:checked").change(),$("#settings_stores_MOBILE:checked").change(),$('[data-name="header-version"]:checked').change()}),$(window).on("customColorThemeCompiled",function(e,result){$("#theme-custom").val(result.text),$("#settings_theme-main-color").val($("#custom-theme-demos-wrap").find("input.minicolors-custom").val())});